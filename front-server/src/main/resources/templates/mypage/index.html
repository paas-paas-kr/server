<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë§ˆì´í˜ì´ì§€ - ë‹¤ë¬¸í™” ê°€ì • ìƒë‹´ ì„œë¹„ìŠ¤</title>
    <link rel="stylesheet" th:href="@{/css/style.css}">
</head>
<body>
    <!-- ìƒë‹¨ ë„¤ë¹„ê²Œì´ì…˜ -->
    <nav class="top-nav">
        <div class="top-nav-content">
            <div class="top-nav-logo">
                <span class="top-nav-logo-icon">ğŸŒ</span>
                <span data-i18n="nav.logo">ë‹¤ë¬¸í™” ê°€ì • ì§€ì›</span>
            </div>
            <div class="top-nav-menu">
                <a href="/home" class="top-nav-item">
                    <svg class="top-nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
                        <polyline points="9 22 9 12 15 12 15 22"></polyline>
                    </svg>
                    <span data-i18n="nav.home">í™ˆ</span>
                </a>
                <a href="/chat" class="top-nav-item">
                    <svg class="top-nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
                    </svg>
                    <span data-i18n="nav.chat">ì±„íŒ…</span>
                </a>
                <a href="/document" class="top-nav-item">
                    <svg class="top-nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                        <polyline points="14 2 14 8 20 8"></polyline>
                    </svg>
                    <span data-i18n="nav.document">ë¬¸ì„œ</span>
                </a>
                <a href="/mypage" class="top-nav-item active">
                    <svg class="top-nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                        <circle cx="12" cy="7" r="4"></circle>
                    </svg>
                    <span data-i18n="nav.mypage">ë§ˆì´í˜ì´ì§€</span>
                </a>
            </div>
        </div>
    </nav>

    <div class="app-container with-top-nav">
        <!-- ë©”ì¸ ì»¨í…ì¸  -->
        <div class="app-content">
            <!-- ë‹¤ë¬¸í™” ê°€ì • ì•ˆë‚´ -->
            <div class="info-box">
                <h3 style="color: #92400e; font-size: 20px; font-weight: 700; margin-bottom: 12px;" data-i18n="mypage.infoTitle">ğŸŒ ë‹¤ë¬¸í™” ê°€ì •ì„ ìœ„í•œ ì¢…í•© ì§€ì› ì„œë¹„ìŠ¤</h3>
                <p style="color: #78350f; font-size: 15px; line-height: 1.7;" data-i18n="mypage.infoDesc">
                    ì–¸ì–´ì™€ ë¬¸í™”ì˜ ì°¨ì´ë¡œ ì–´ë ¤ì›€ì„ ê²ªìœ¼ì‹œëŠ” ë‹¤ë¬¸í™” ê°€ì •ì„ ìœ„í•´<br>
                    AI ìƒë‹´, ë¬¸ì„œ ìš”ì•½, ì •ë³´ ì•ˆë‚´ ë“± ë‹¤ì–‘í•œ ì„œë¹„ìŠ¤ë¥¼ ì œê³µí•©ë‹ˆë‹¤.
                </p>
            </div>

            <!-- í”„ë¡œí•„ ì„¹ì…˜ -->
            <div class="card">
                <div class="profile-section">
                    <div class="profile-avatar-large" id="profileAvatar">ì‚¬</div>
                    <div class="profile-info-large">
                        <h2 class="profile-name" id="profileName">ì‚¬ìš©ì</h2>
                        <p class="profile-email" id="profileEmail">user@example.com</p>
                        <p class="profile-language" id="profileLanguage" style="color: var(--text-secondary); font-size: 14px; margin-top: 4px;">ì„ í˜¸ ì–¸ì–´: í•œêµ­ì–´</p>
                    </div>
                    <button class="btn btn-primary" onclick="editProfile()" style="width: auto; padding: 14px 32px;" data-i18n="mypage.editProfile">
                        í”„ë¡œí•„ ìˆ˜ì •
                    </button>
                </div>
            </div>

            <!-- ì„¤ì • ë©”ë‰´ -->
            <div class="card">
                <h2 class="card-title" data-i18n="mypage.settings">ì„¤ì •</h2>
                <div class="menu-list">
                    <a href="#" onclick="showLanguageSetting(); return false;" class="menu-item">
                        <div class="menu-item-content">
                            <svg class="menu-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <circle cx="12" cy="12" r="10"></circle>
                                <line x1="2" y1="12" x2="22" y2="12"></line>
                                <path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"></path>
                            </svg>
                            <span style="font-weight: 600;" data-i18n="mypage.language">ì–¸ì–´ ì„¤ì •</span>
                        </div>
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polyline points="9 18 15 12 9 6"></polyline>
                        </svg>
                    </a>

                    <a href="#" onclick="showNotificationSetting(); return false;" class="menu-item">
                        <div class="menu-item-content">
                            <svg class="menu-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path>
                                <path d="M13.73 21a2 2 0 0 1-3.46 0"></path>
                            </svg>
                            <span style="font-weight: 600;" data-i18n="mypage.notification">ì•Œë¦¼ ì„¤ì •</span>
                        </div>
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polyline points="9 18 15 12 9 6"></polyline>
                        </svg>
                    </a>

                    <a href="#" onclick="clearAllData(); return false;" class="menu-item">
                        <div class="menu-item-content">
                            <svg class="menu-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="color: #ef4444;">
                                <polyline points="3 6 5 6 21 6"></polyline>
                                <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
                            </svg>
                            <span style="font-weight: 600; color: #ef4444;" data-i18n="mypage.deleteData">ëª¨ë“  ë°ì´í„° ì‚­ì œ</span>
                        </div>
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polyline points="9 18 15 12 9 6"></polyline>
                        </svg>
                    </a>
                </div>
            </div>

            <!-- ë„ì›€ë§ -->
            <div class="card">
                <h2 class="card-title" data-i18n="mypage.help">ë„ì›€ë§ & ì •ë³´</h2>
                <div class="menu-list">
                    <a href="#" onclick="showHelp(); return false;" class="menu-item">
                        <div class="menu-item-content">
                            <svg class="menu-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <circle cx="12" cy="12" r="10"></circle>
                                <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"></path>
                                <line x1="12" y1="17" x2="12.01" y2="17"></line>
                            </svg>
                            <span style="font-weight: 600;" data-i18n="mypage.guide">ì‚¬ìš© ê°€ì´ë“œ</span>
                        </div>
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polyline points="9 18 15 12 9 6"></polyline>
                        </svg>
                    </a>

                    <a href="#" onclick="showAbout(); return false;" class="menu-item">
                        <div class="menu-item-content">
                            <svg class="menu-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <circle cx="12" cy="12" r="10"></circle>
                                <line x1="12" y1="16" x2="12" y2="12"></line>
                                <line x1="12" y1="8" x2="12.01" y2="8"></line>
                            </svg>
                            <span style="font-weight: 600;" data-i18n="mypage.about">ì•± ì •ë³´</span>
                        </div>
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polyline points="9 18 15 12 9 6"></polyline>
                        </svg>
                    </a>
                </div>
            </div>

            <!-- ë¡œê·¸ì•„ì›ƒ ë²„íŠ¼ -->
            <button class="btn btn-primary" onclick="logout()" style="background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%); box-shadow: 0 10px 30px -5px rgba(239, 68, 68, 0.3);" data-i18n="mypage.logout">
                ë¡œê·¸ì•„ì›ƒ
            </button>
        </div>
    </div>

    <!-- ì–¸ì–´ ì„¤ì • ëª¨ë‹¬ -->
    <div id="languageModal" class="modal">
        <div class="modal-content" style="max-width: 500px;">
            <div class="modal-header">
                <h2 class="modal-title">ì–¸ì–´ ì„¤ì •</h2>
                <button class="modal-close" onclick="closeLanguageModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div style="display: flex; flex-direction: column; gap: 12px;">
                    <button class="language-option" onclick="selectLanguage('í•œêµ­ì–´')">
                        <span style="font-size: 24px; margin-right: 12px;">ğŸ‡°ğŸ‡·</span>
                        <span style="font-weight: 600;">í•œêµ­ì–´</span>
                    </button>
                    <button class="language-option" onclick="selectLanguage('English')">
                        <span style="font-size: 24px; margin-right: 12px;">ğŸ‡ºğŸ‡¸</span>
                        <span style="font-weight: 600;">English</span>
                    </button>
                    <button class="language-option" onclick="selectLanguage('ä¸­æ–‡')">
                        <span style="font-size: 24px; margin-right: 12px;">ğŸ‡¨ğŸ‡³</span>
                        <span style="font-weight: 600;">ä¸­æ–‡</span>
                    </button>
                    <button class="language-option" onclick="selectLanguage('Tiáº¿ng Viá»‡t')">
                        <span style="font-size: 24px; margin-right: 12px;">ğŸ‡»ğŸ‡³</span>
                        <span style="font-weight: 600;">Tiáº¿ng Viá»‡t</span>
                    </button>
                    <button class="language-option" onclick="selectLanguage('æ—¥æœ¬èª')">
                        <span style="font-size: 24px; margin-right: 12px;">ğŸ‡¯ğŸ‡µ</span>
                        <span style="font-weight: 600;">æ—¥æœ¬èª</span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- ì•Œë¦¼ ì„¤ì • ëª¨ë‹¬ -->
    <div id="notificationModal" class="modal">
        <div class="modal-content" style="max-width: 500px;">
            <div class="modal-header">
                <h2 class="modal-title">ì•Œë¦¼ ì„¤ì •</h2>
                <button class="modal-close" onclick="closeNotificationModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div style="padding: 20px; text-align: center;">
                    <div style="font-size: 64px; margin-bottom: 20px;" id="notificationIcon">ğŸ””</div>
                    <p style="font-size: 18px; font-weight: 600; color: var(--text-primary); margin-bottom: 12px;" id="notificationStatus">ì•Œë¦¼ì´ í™œì„±í™”ë˜ì–´ ìˆìŠµë‹ˆë‹¤</p>
                    <p style="color: var(--text-secondary); margin-bottom: 32px;">ëŒ€í™” ë©”ì‹œì§€ì™€ ë¬¸ì„œ ìš”ì•½ ì™„ë£Œ ì‹œ ì•Œë¦¼ì„ ë°›ìŠµë‹ˆë‹¤</p>
                    <button class="btn btn-primary" onclick="toggleNotification()" id="notificationToggleBtn">
                        ì•Œë¦¼ ë„ê¸°
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script src="/js/config.js"></script>
    <script>
        // ì‚¬ìš©ì ì •ë³´ ë¡œë“œ
        function loadUserInfo() {
            const userInfo = JSON.parse(localStorage.getItem('userInfo') || '{"name": "ì‚¬ìš©ì", "email": "user@example.com", "preferredLanguage": "KOREAN"}');
            document.getElementById('profileName').textContent = userInfo.name;
            document.getElementById('profileEmail').textContent = userInfo.email;
            document.getElementById('profileAvatar').textContent = userInfo.name.charAt(0);

            // ì„ í˜¸ ì–¸ì–´ í‘œì‹œ
            if (userInfo.preferredLanguage) {
                const langMap = {
                    'KOREAN': 'í•œêµ­ì–´',
                    'ENGLISH': 'English',
                    'CHINESE': 'ä¸­æ–‡',
                    'VIETNAMESE': 'Tiáº¿ng Viá»‡t',
                    'JAPANESE': 'æ—¥æœ¬èª'
                };
                const langName = langMap[userInfo.preferredLanguage] || 'í•œêµ­ì–´';
                document.getElementById('profileLanguage').textContent = `ì„ í˜¸ ì–¸ì–´: ${langName}`;
            }
        }

        // í”„ë¡œí•„ í¸ì§‘
        function editProfile() {
            const currentName = document.getElementById('profileName').textContent;
            const currentEmail = document.getElementById('profileEmail').textContent;

            const newName = prompt('ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”:', currentName);
            if (newName === null || newName.trim() === '') return;

            const newEmail = prompt('ì´ë©”ì¼ì„ ì…ë ¥í•˜ì„¸ìš”:', currentEmail);
            if (newEmail === null || newEmail.trim() === '') return;

            const userInfo = {
                name: newName.trim(),
                email: newEmail.trim()
            };

            localStorage.setItem('userInfo', JSON.stringify(userInfo));
            loadUserInfo();
            alert('âœ… í”„ë¡œí•„ì´ ì—…ë°ì´íŠ¸ë˜ì—ˆìŠµë‹ˆë‹¤.');
        }

        // ì–¸ì–´ ì„¤ì • ëª¨ë‹¬ ì—´ê¸°
        function showLanguageSetting() {
            document.getElementById('languageModal').classList.add('open');
        }

        // ì–¸ì–´ ì„¤ì • ëª¨ë‹¬ ë‹«ê¸°
        function closeLanguageModal() {
            document.getElementById('languageModal').classList.remove('open');
        }

        // ì–¸ì–´ ì„ íƒ
        async function selectLanguage(language) {
            // ì–¸ì–´ ì½”ë“œ ë§¤í•‘
            const languageMap = {
                'í•œêµ­ì–´': 'KOREAN',
                'English': 'ENGLISH',
                'ä¸­æ–‡': 'CHINESE',
                'Tiáº¿ng Viá»‡t': 'VIETNAMESE',
                'æ—¥æœ¬èª': 'JAPANESE'
            };
            const langEnum = languageMap[language] || 'KOREAN';

            try {
                console.log('ğŸŒ ì–¸ì–´ ë³€ê²½ ìš”ì²­:', langEnum);

                // ì„œë²„ì— ì–¸ì–´ ì„¤ì • ë³€ê²½ ìš”ì²­
                const response = await fetch(`${window.API_BASE_URL}/api/auth/language`, {
                    method: 'PATCH',
                    headers: window.getAuthHeaders(),
                    body: JSON.stringify({
                        preferredLanguage: langEnum
                    }),
                    credentials: 'include'
                });

                console.log('ğŸ“¥ ì‘ë‹µ ìƒíƒœ:', response.status);

                if (response.ok) {
                    const result = await response.json();
                    console.log('âœ… ì–¸ì–´ ë³€ê²½ ì„±ê³µ:', result);

                    // ì‚¬ìš©ì ì •ë³´ ì—…ë°ì´íŠ¸
                    const userInfo = JSON.parse(localStorage.getItem('userInfo') || '{}');
                    userInfo.preferredLanguage = langEnum;
                    localStorage.setItem('userInfo', JSON.stringify(userInfo));

                    // ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì—ë„ ì €ì¥
                    localStorage.setItem('language', language);
                    closeLanguageModal();

                    // í˜ì´ì§€ UI ì–¸ì–´ ë³€ê²½
                    if (window.i18n) {
                        window.i18n.updatePageLanguage();
                    }

                    // í”„ë¡œí•„ ì •ë³´ ë‹¤ì‹œ ë¡œë“œ
                    loadUserInfo();

                    alert(`âœ… ì–¸ì–´ê°€ "${language}"ë¡œ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤.\nLanguage changed to "${language}".`);
                } else {
                    const errorText = await response.text();
                    console.error('âŒ ì–¸ì–´ ë³€ê²½ ì‹¤íŒ¨:', response.status, errorText);
                    alert(`ì–¸ì–´ ì„¤ì • ë³€ê²½ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\nìƒíƒœ: ${response.status}\nì˜¤ë¥˜: ${errorText}`);
                }
            } catch (error) {
                console.error('âŒ Language update error:', error);
                alert(`ì–¸ì–´ ì„¤ì • ë³€ê²½ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.\nì˜¤ë¥˜: ${error.message}`);
            }
        }

        // ì•Œë¦¼ ì„¤ì • ëª¨ë‹¬ ì—´ê¸°
        function showNotificationSetting() {
            const enabled = localStorage.getItem('notifications') !== 'false';
            document.getElementById('notificationIcon').textContent = enabled ? 'ğŸ””' : 'ğŸ”•';
            document.getElementById('notificationStatus').textContent = enabled ? 'ì•Œë¦¼ì´ í™œì„±í™”ë˜ì–´ ìˆìŠµë‹ˆë‹¤' : 'ì•Œë¦¼ì´ ë¹„í™œì„±í™”ë˜ì–´ ìˆìŠµë‹ˆë‹¤';
            document.getElementById('notificationToggleBtn').textContent = enabled ? 'ì•Œë¦¼ ë„ê¸°' : 'ì•Œë¦¼ ì¼œê¸°';
            document.getElementById('notificationModal').classList.add('open');
        }

        // ì•Œë¦¼ ì„¤ì • ëª¨ë‹¬ ë‹«ê¸°
        function closeNotificationModal() {
            document.getElementById('notificationModal').classList.remove('open');
        }

        // ì•Œë¦¼ í† ê¸€
        function toggleNotification() {
            const enabled = localStorage.getItem('notifications') !== 'false';
            localStorage.setItem('notifications', enabled ? 'false' : 'true');
            closeNotificationModal();
            alert(enabled ? 'ğŸ”• ì•Œë¦¼ì´ ë¹„í™œì„±í™”ë˜ì—ˆìŠµë‹ˆë‹¤.' : 'ğŸ”” ì•Œë¦¼ì´ í™œì„±í™”ë˜ì—ˆìŠµë‹ˆë‹¤.');
        }

        // ëª¨ë“  ë°ì´í„° ì‚­ì œ
        function clearAllData() {
            if (!confirm('âš ï¸ ëª¨ë“  ëŒ€í™” ê¸°ë¡ê³¼ ë¬¸ì„œë¥¼ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?\n\nì´ ì‘ì—…ì€ ë˜ëŒë¦´ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.')) {
                return;
            }

            if (!confirm('ì •ë§ë¡œ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?\n\në§ˆì§€ë§‰ í™•ì¸ì…ë‹ˆë‹¤.')) {
                return;
            }

            localStorage.removeItem('chatThreads');
            localStorage.removeItem('documents');
            alert('âœ… ëª¨ë“  ë°ì´í„°ê°€ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.');
        }

        // ë„ì›€ë§
        function showHelp() {
            alert(`ğŸ“± ë‹¤ë¬¸í™” ê°€ì • ìƒë‹´ ì„œë¹„ìŠ¤ ì‚¬ìš© ê°€ì´ë“œ

ğŸ“Œ ì±„íŒ… íƒ­
â€¢ AI ìƒë‹´ì‚¬ì™€ ì‹¤ì‹œê°„ìœ¼ë¡œ ëŒ€í™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤
â€¢ ì—¬ëŸ¬ ëŒ€í™” ìŠ¤ë ˆë“œë¥¼ ë§Œë“¤ì–´ ê´€ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤
â€¢ ëŒ€í™” ë‚´ìš©ì€ ìë™ìœ¼ë¡œ ì €ì¥ë©ë‹ˆë‹¤

ğŸ“Œ ë¬¸ì„œ íƒ­
â€¢ ë¬¸ì„œë¥¼ ì—…ë¡œë“œí•˜ë©´ AIê°€ ìë™ìœ¼ë¡œ ìš”ì•½í•´ì¤ë‹ˆë‹¤
â€¢ PDF, DOC, DOCX, TXT íŒŒì¼ì„ ì§€ì›í•©ë‹ˆë‹¤
â€¢ ë“œë˜ê·¸ ì•¤ ë“œë¡­ìœ¼ë¡œ ê°„í¸í•˜ê²Œ ì—…ë¡œë“œí•˜ì„¸ìš”
â€¢ ìµœëŒ€ 10MBê¹Œì§€ ì—…ë¡œë“œ ê°€ëŠ¥í•©ë‹ˆë‹¤

ğŸ“Œ ë§ˆì´í˜ì´ì§€
â€¢ í”„ë¡œí•„ê³¼ ì„¤ì •ì„ ê´€ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤
â€¢ ì–¸ì–´ ì„¤ì •ì„ ë³€ê²½í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤

ğŸ’¡ ì¶”ê°€ ì§ˆë¬¸ì´ ìˆìœ¼ì‹œë©´ ì±„íŒ…ì„ í†µí•´ ë¬¸ì˜í•´ì£¼ì„¸ìš”!`);
        }

        // ì•± ì •ë³´
        function showAbout() {
            alert(`ğŸŒ ë‹¤ë¬¸í™” ê°€ì • ìƒë‹´ ì„œë¹„ìŠ¤

ë²„ì „: 1.0.0
ê°œë°œ: PaaSPaaS Team

ë‹¤ë¬¸í™” ê°€ì •ì„ ìœ„í•œ AI ê¸°ë°˜ ìƒë‹´ ë°
ë¬¸ì„œ ì§€ì› ì„œë¹„ìŠ¤ì…ë‹ˆë‹¤.

ìš°ë¦¬ëŠ” ì–¸ì–´ì™€ ë¬¸í™”ì˜ ì¥ë²½ì„ ë„˜ì–´
ëª¨ë“  ê°€ì •ì´ í•„ìš”í•œ ì •ë³´ì™€ ë„ì›€ì„
ì‰½ê²Œ ë°›ì„ ìˆ˜ ìˆë„ë¡ ë•ê³  ìˆìŠµë‹ˆë‹¤.

Â© 2025 All rights reserved.`);
        }

        // ë¡œê·¸ì•„ì›ƒ
        async function logout() {
            const confirmMsg = getLogoutMessage('confirm');
            if (confirm(confirmMsg)) {
                try {
                    const response = await fetch(`${window.API_BASE_URL}/api/auth/logout`, {
                        method: 'POST',
                        headers: window.getAuthHeaders(),
                        credentials: 'include'
                    });

                    // ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ ì •ë¦¬
                    localStorage.removeItem('isLoggedIn');
                    localStorage.removeItem('userInfo');
                    localStorage.removeItem('accessToken');

                    const successMsg = getLogoutMessage('success');
                    alert(successMsg);
                    window.location.href = '/auth/login';
                } catch (error) {
                    console.error('Logout error:', error);
                    // ì—ëŸ¬ê°€ ë°œìƒí•´ë„ ë¡œì»¬ ì •ë¦¬ í›„ ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ì´ë™
                    localStorage.removeItem('isLoggedIn');
                    localStorage.removeItem('userInfo');
                    localStorage.removeItem('accessToken');
                    window.location.href = '/auth/login';
                }
            }
        }

        // ë¡œê·¸ì•„ì›ƒ ë©”ì‹œì§€ ë‹¤êµ­ì–´ ì²˜ë¦¬
        function getLogoutMessage(type) {
            const messages = {
                'confirm': {
                    'KOREAN': 'ë¡œê·¸ì•„ì›ƒí•˜ì‹œê² ìŠµë‹ˆê¹Œ?',
                    'ENGLISH': 'Do you want to logout?',
                    'VIETNAMESE': 'Báº¡n cÃ³ muá»‘n Ä‘Äƒng xuáº¥t?',
                    'CHINESE': 'ç¡®å®šè¦é€€å‡ºç™»å½•å—ï¼Ÿ',
                    'JAPANESE': 'ãƒ­ã‚°ã‚¢ã‚¦ãƒˆã—ã¾ã™ã‹ï¼Ÿ'
                },
                'success': {
                    'KOREAN': 'âœ… ë¡œê·¸ì•„ì›ƒë˜ì—ˆìŠµë‹ˆë‹¤.',
                    'ENGLISH': 'âœ… Logged out successfully.',
                    'VIETNAMESE': 'âœ… ÄÄƒng xuáº¥t thÃ nh cÃ´ng.',
                    'CHINESE': 'âœ… é€€å‡ºç™»å½•æˆåŠŸã€‚',
                    'JAPANESE': 'âœ… ãƒ­ã‚°ã‚¢ã‚¦ãƒˆã—ã¾ã—ãŸã€‚'
                }
            };

            const lang = window.i18n ? window.i18n.getLanguageCode(window.i18n.getCurrentLanguage()) : 'KOREAN';
            return messages[type]?.[lang] || messages[type]?.['KOREAN'] || '';
        }

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì •ë³´ ë¡œë“œ
        document.addEventListener('DOMContentLoaded', function() {
            loadUserInfo();
        });
    </script>

    <script src="/js/i18n.js"></script>
    <script>
        // í˜ì´ì§€ ë¡œë“œ ì‹œ ë¡œê·¸ì¸ ì²´í¬ ë° ì–¸ì–´ ì ìš©
        document.addEventListener('DOMContentLoaded', function() {
            // ë¡œê·¸ì¸ ì²´í¬
            const isLoggedIn = localStorage.getItem('isLoggedIn');
            if (!isLoggedIn || isLoggedIn !== 'true') {
                window.location.href = '/auth/login';
                return;
            }

            // ì–¸ì–´ ì ìš©
            if (window.i18n) {
                window.i18n.updatePageLanguage();
            }
        });
    </script>
</body>
</html>
